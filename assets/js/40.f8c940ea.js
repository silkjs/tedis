(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{228:function(s,t,a){"use strict";a.r(t);var e=a(7),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"key"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#key"}},[s._v("#")]),s._v(" key")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("说明")]),s._v(" "),t("p",[s._v("本节示例中的 "),t("code",[s._v("Key")]),s._v(" 为 Tedis 实例对象，演示部分省略了外部的 async 函数层")])]),s._v(" "),t("h2",{attrs:{id:"del"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#del"}},[s._v("#")]),s._v(" del")]),s._v(" "),t("p",[s._v("用于删除已存在的键。不存在的 key 会被忽略。")]),s._v(" "),t("h4",{attrs:{id:"redis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis"}},[s._v("#")]),s._v(" "),t("em",[s._v("Redis")]),s._v(" "),t("a",{attrs:{href:"http://www.redis.cn/commands/del.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("+"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("可用版本："),t("code",[s._v(">= 1.0.0")])]),s._v(" "),t("li",[s._v("算法复杂度："),t("code",[s._v("O(N)")])]),s._v(" "),t("li",[s._v("返回值：被删除键的数量")]),s._v(" "),t("li",[s._v("指令案例：")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SET key1 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OK"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SET key2 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"World"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OK"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" DEL key1 key2 key3\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n")])])]),t("h4",{attrs:{id:"tedis"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tedis"}},[s._v("#")]),s._v(" "),t("em",[s._v("Tedis")])]),s._v(" "),t("ul",[t("li",[s._v("接口：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("del")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("keys"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Promise")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("ul",[t("li",[s._v("示例：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" Key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("del")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"key1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"key2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"key3"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2")]),s._v("\n")])])]),s._v(" "),t("h2",{attrs:{id:"exists"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#exists"}},[s._v("#")]),s._v(" exists")]),s._v(" "),t("p",[s._v("命令用于检查给定 key 是否存在。")]),s._v(" "),t("h4",{attrs:{id:"redis-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-2"}},[s._v("#")]),s._v(" "),t("em",[s._v("Redis")]),s._v(" "),t("a",{attrs:{href:"http://www.redis.cn/commands/exists.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("+"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("可用版本："),t("code",[s._v(">= 1.0.0")])]),s._v(" "),t("li",[s._v("算法复杂度："),t("code",[s._v("O(1)")])]),s._v(" "),t("li",[s._v("返回值：若 key 存在返回"),t("code",[s._v("1")]),s._v("，否则返回"),t("code",[s._v("0")]),s._v(" 。")]),s._v(" "),t("li",[s._v("指令案例：")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SET key1 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OK"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" EXISTS key1\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" EXISTS nosuchkey\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SET key2 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"World"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OK"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" EXISTS key1 key2 nosuchkey\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n")])])]),t("h4",{attrs:{id:"tedis-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tedis-2"}},[s._v("#")]),s._v(" "),t("em",[s._v("Tedis")])]),s._v(" "),t("ul",[t("li",[s._v("接口：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("exists")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("keys"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Promise")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("ul",[t("li",[s._v("示例：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" Key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("exists")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"key1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" Key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("exists")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nosuchkey"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" Key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("exists")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"key1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"key2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nosuchkey"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2")]),s._v("\n")])])]),t("h2",{attrs:{id:"expire"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#expire"}},[s._v("#")]),s._v(" expire")]),s._v(" "),t("p",[s._v("用于设置 key 的过期时间，以秒为单位。key 过期后将不再可用。")]),s._v(" "),t("h4",{attrs:{id:"redis-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-3"}},[s._v("#")]),s._v(" "),t("em",[s._v("Redis")]),s._v(" "),t("a",{attrs:{href:"http://www.redis.cn/commands/expire.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("+"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("可用版本："),t("code",[s._v(">= 1.0.0")])]),s._v(" "),t("li",[s._v("算法复杂度："),t("code",[s._v("O(1)")])]),s._v(" "),t("li",[s._v("返回值：设置成功返回"),t("code",[s._v("1")]),s._v("。 当 key 不存在或者不能为 key 设置过期时间时返回"),t("code",[s._v("0")]),s._v("。")]),s._v(" "),t("li",[s._v("指令案例：")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SET mykey "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OK"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" EXPIRE mykey "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),t("h4",{attrs:{id:"tedis-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tedis-3"}},[s._v("#")]),s._v(" "),t("em",[s._v("Tedis")])]),s._v(" "),t("ul",[t("li",[s._v("接口：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expire")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" seconds"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Promise")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("ul",[t("li",[s._v("示例：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" Key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expire")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mykey"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1")]),s._v("\n")])])]),t("h2",{attrs:{id:"expireat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#expireat"}},[s._v("#")]),s._v(" expireat")]),s._v(" "),t("p",[s._v("以 UNIX 时间戳(unix timestamp)格式设置 key 的过期时间。key 过期后将不再可用。")]),s._v(" "),t("h4",{attrs:{id:"redis-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-4"}},[s._v("#")]),s._v(" "),t("em",[s._v("Redis")]),s._v(" "),t("a",{attrs:{href:"http://www.redis.cn/commands/expireat.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("+"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("可用版本："),t("code",[s._v(">= 1.0.0")])]),s._v(" "),t("li",[s._v("算法复杂度："),t("code",[s._v("O(1)")])]),s._v(" "),t("li",[s._v("返回值：设置成功返回"),t("code",[s._v("1")]),s._v("。 当 key 不存在或者不能为 key 设置过期时间时返回"),t("code",[s._v("0")]),s._v("。")]),s._v(" "),t("li",[s._v("指令案例：")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SET mykey "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OK"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" EXPIREAT mykey "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1293840000")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),t("h4",{attrs:{id:"tedis-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tedis-4"}},[s._v("#")]),s._v(" "),t("em",[s._v("Tedis")])]),s._v(" "),t("ul",[t("li",[s._v("接口：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expireat")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" timestamp"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Promise")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("ul",[t("li",[s._v("示例：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" Key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("expireat")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mykey"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1293840000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1")]),s._v("\n")])])]),t("h2",{attrs:{id:"keys"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#keys"}},[s._v("#")]),s._v(" keys")]),s._v(" "),t("p",[s._v("查找所有符合给定模式 pattern（正则表达式）的 key 。")]),s._v(" "),t("h4",{attrs:{id:"redis-5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-5"}},[s._v("#")]),s._v(" "),t("em",[s._v("Redis")]),s._v(" "),t("a",{attrs:{href:"http://www.redis.cn/commands/keys.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("+"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("可用版本："),t("code",[s._v(">= 1.0.0")])]),s._v(" "),t("li",[s._v("算法复杂度："),t("code",[s._v("O(N)")])]),s._v(" "),t("li",[s._v("返回值：所有符合条件的 key。")]),s._v(" "),t("li",[s._v("指令案例：")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" MSET firstname Jack lastname Stuntman age "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("35")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OK"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" KEYS *name*\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"firstname"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lastname"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" KEYS a??\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" KEYS *\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"firstname"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lastname"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"age"')]),s._v("\n")])])]),t("h4",{attrs:{id:"tedis-5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tedis-5"}},[s._v("#")]),s._v(" "),t("em",[s._v("Tedis")])]),s._v(" "),t("ul",[t("li",[s._v("接口：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("keys")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("pattern"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Promise")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("ul",[t("li",[s._v("示例：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" Key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("keys")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*name*"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// ["firstname", "lastname"];')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" Key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("keys")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a??"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// ["age"];')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" Key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("keys")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// ["firstname", "lastname", "age"];')]),s._v("\n")])])]),t("h2",{attrs:{id:"move"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#move"}},[s._v("#")]),s._v(" move")]),s._v(" "),t("p",[s._v("将当前数据库的 key 移动到给定的数据库 db 当中。")]),s._v(" "),t("h4",{attrs:{id:"redis-6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-6"}},[s._v("#")]),s._v(" "),t("em",[s._v("Redis")]),s._v(" "),t("a",{attrs:{href:"http://www.redis.cn/commands/move.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("+"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("可用版本："),t("code",[s._v(">= 1.0.0")])]),s._v(" "),t("li",[s._v("算法复杂度："),t("code",[s._v("O(1)")])]),s._v(" "),t("li",[s._v("返回值：移动成功返回"),t("code",[s._v("1")]),s._v("，失败则返回"),t("code",[s._v("0")]),s._v("。")]),s._v(" "),t("li",[s._v("指令案例：")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SELECT "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OK"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SET mykey "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"secret base - Zone"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OK"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" MOVE mykey "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),t("h4",{attrs:{id:"tedis-6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tedis-6"}},[s._v("#")]),s._v(" "),t("em",[s._v("Tedis")])]),s._v(" "),t("ul",[t("li",[s._v("接口：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("move")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" db"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Promise")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("ul",[t("li",[s._v("示例：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[s._v("Key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("move")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mykey"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1")]),s._v("\n")])])]),t("h2",{attrs:{id:"persist"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#persist"}},[s._v("#")]),s._v(" persist")]),s._v(" "),t("p",[s._v("移除给定 key 的生存时间。")]),s._v(" "),t("h4",{attrs:{id:"redis-7"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-7"}},[s._v("#")]),s._v(" "),t("em",[s._v("Redis")]),s._v(" "),t("a",{attrs:{href:"http://www.redis.cn/commands/persist.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("+"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("可用版本："),t("code",[s._v(">= 2.2.0")])]),s._v(" "),t("li",[s._v("算法复杂度："),t("code",[s._v("O(1)")])]),s._v(" "),t("li",[s._v("返回值：当生存时间移除成功时，返回 1 ，如果 key 不存在或 key 没有设置生存时间，返回 0 。")]),s._v(" "),t("li",[s._v("指令案例：")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SET mykey "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OK"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" EXPIRE mykey "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" TTL mykey\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" PERSIST mykey\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" TTL mykey\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-1")]),s._v("\n")])])]),t("h4",{attrs:{id:"tedis-7"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tedis-7"}},[s._v("#")]),s._v(" "),t("em",[s._v("Tedis")])]),s._v(" "),t("ul",[t("li",[s._v("接口：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("persist")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Promise")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("ul",[t("li",[s._v("示例：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" Key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("persist")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mykey"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1")]),s._v("\n")])])]),t("h2",{attrs:{id:"pexpire"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pexpire"}},[s._v("#")]),s._v(" pexpire")]),s._v(" "),t("p",[s._v("这个命令和 EXPIRE 命令的作用类似，但是它以毫秒为单位设置 key 的生存时间，而不像 EXPIRE 命令那样，以秒为单位。")]),s._v(" "),t("h4",{attrs:{id:"redis-8"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-8"}},[s._v("#")]),s._v(" "),t("em",[s._v("Redis")]),s._v(" "),t("a",{attrs:{href:"http://www.redis.cn/commands/pexpire.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("+"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("可用版本："),t("code",[s._v(">= 2.6.0")])]),s._v(" "),t("li",[s._v("算法复杂度："),t("code",[s._v("O(1)")])]),s._v(" "),t("li",[s._v("返回值：设置成功，返回 1，key 不存在或设置失败，返回 0")]),s._v(" "),t("li",[s._v("指令案例：")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SET mykey "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OK"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" PEXPIRE mykey "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" TTL mykey\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" PTTL mykey\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1499")]),s._v("\n")])])]),t("h4",{attrs:{id:"tedis-8"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tedis-8"}},[s._v("#")]),s._v(" "),t("em",[s._v("Tedis")])]),s._v(" "),t("ul",[t("li",[s._v("接口：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pexpire")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" milliseconds"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Promise")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("ul",[t("li",[s._v("示例：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" Key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pexpire")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mykey"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1")]),s._v("\n")])])]),t("h2",{attrs:{id:"pexpireat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pexpireat"}},[s._v("#")]),s._v(" pexpireat")]),s._v(" "),t("p",[s._v("PEXPIREAT 这个命令和 EXPIREAT 命令类似，但它以毫秒为单位设置 key 的过期 unix 时间戳，而不是像 EXPIREAT 那样，以秒为单位。")]),s._v(" "),t("h4",{attrs:{id:"redis-9"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-9"}},[s._v("#")]),s._v(" "),t("em",[s._v("Redis")]),s._v(" "),t("a",{attrs:{href:"http://www.redis.cn/commands/pexpireat.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("+"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("可用版本："),t("code",[s._v(">= 2.6.0")])]),s._v(" "),t("li",[s._v("算法复杂度："),t("code",[s._v("O(1)")])]),s._v(" "),t("li",[s._v("返回值：设置成功，返回 1，key 不存在或设置失败，返回 0")]),s._v(" "),t("li",[s._v("指令案例：")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SET mykey "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OK"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" PEXPIREAT mykey "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1555555555005")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" TTL mykey\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21889460")]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" PTTL mykey\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21889460097")]),s._v("\n")])])]),t("h4",{attrs:{id:"tedis-9"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tedis-9"}},[s._v("#")]),s._v(" "),t("em",[s._v("Tedis")])]),s._v(" "),t("ul",[t("li",[s._v("接口：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pexpireat")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" millisecondsTimestamp"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Promise")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("ul",[t("li",[s._v("示例：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" Key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pexpireat")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mykey"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1555555555005")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1")]),s._v("\n")])])]),t("h2",{attrs:{id:"pttl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pttl"}},[s._v("#")]),s._v(" pttl")]),s._v(" "),t("p",[s._v("以毫秒为单位返回 key 的剩余生存时间。在 Redis 2.6 和之前版本，如果 key 不存在或者 key 存在且无过期时间将返回-1。从 Redis 2.8 开始，错误返回值发送了如下变化：")]),s._v(" "),t("ul",[t("li",[s._v("如果 key 不存在返回-2")]),s._v(" "),t("li",[s._v("如果 key 存在且无过期时间返回-1")])]),s._v(" "),t("h4",{attrs:{id:"redis-10"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-10"}},[s._v("#")]),s._v(" "),t("em",[s._v("Redis")]),s._v(" "),t("a",{attrs:{href:"http://www.redis.cn/commands/pttl.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("+"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("可用版本："),t("code",[s._v(">= 2.6.0")])]),s._v(" "),t("li",[s._v("算法复杂度："),t("code",[s._v("O(1)")])]),s._v(" "),t("li",[s._v("返回值： key 有效的毫秒数（TTL in milliseconds）,或者一个负值的错误 (参考上文)")]),s._v(" "),t("li",[s._v("指令案例：")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SET mykey "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OK"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" EXPIRE mykey "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" PTTL mykey\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("999")]),s._v("\n")])])]),t("h4",{attrs:{id:"tedis-10"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tedis-10"}},[s._v("#")]),s._v(" "),t("em",[s._v("Tedis")])]),s._v(" "),t("ul",[t("li",[s._v("接口：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pttl")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Promise")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("ul",[t("li",[s._v("示例：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" Key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("pttl")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mykey"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 999")]),s._v("\n")])])]),t("h2",{attrs:{id:"randomkey"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#randomkey"}},[s._v("#")]),s._v(" randomkey")]),s._v(" "),t("p",[s._v("从当前数据库返回一个随机的 key。")]),s._v(" "),t("h4",{attrs:{id:"redis-11"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-11"}},[s._v("#")]),s._v(" "),t("em",[s._v("Redis")]),s._v(" "),t("a",{attrs:{href:"http://www.redis.cn/commands/randomkey.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("+"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("可用版本："),t("code",[s._v(">= 1.0.0")])]),s._v(" "),t("li",[s._v("算法复杂度："),t("code",[s._v("O(1)")])]),s._v(" "),t("li",[s._v("返回值：如果数据库没有任何 key，返回 nil，否则返回一个随机的 key。")]),s._v(" "),t("li",[s._v("指令案例：")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" MSET fruit "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"apple"')]),s._v(" drink "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"beer"')]),s._v(" food "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cookies"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OK"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" RANDOMKEY\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"fruit"')]),s._v("\n")])])]),t("h4",{attrs:{id:"tedis-11"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tedis-11"}},[s._v("#")]),s._v(" "),t("em",[s._v("Tedis")])]),s._v(" "),t("ul",[t("li",[s._v("接口：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("randomkey")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Promise")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("ul",[t("li",[s._v("示例：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" Key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("randomkey")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// fruit")]),s._v("\n")])])]),t("h2",{attrs:{id:"rename"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rename"}},[s._v("#")]),s._v(" rename")]),s._v(" "),t("p",[s._v("将 key 重命名为 newkey，当 key 不存在时返回一个错误，如果 newkey 已经存在，则值将被覆盖。在 Redis "),t("code",[s._v(">= 3.2.0")]),s._v(" 之前，key 与 newkey 相同的情况下将返回一个错误。")]),s._v(" "),t("h4",{attrs:{id:"redis-12"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-12"}},[s._v("#")]),s._v(" "),t("em",[s._v("Redis")]),s._v(" "),t("a",{attrs:{href:"http://www.redis.cn/commands/rename.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("+"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("可用版本："),t("code",[s._v(">= 1.0.0")])]),s._v(" "),t("li",[s._v("算法复杂度："),t("code",[s._v("O(1)")])]),s._v(" "),t("li",[s._v('返回值：如果设置成功返回"OK"')]),s._v(" "),t("li",[s._v("指令案例：")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SET mykey "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OK"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" RENAME mykey myotherkey\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OK"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" GET myotherkey\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello"')]),s._v("\n")])])]),t("h4",{attrs:{id:"tedis-12"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tedis-12"}},[s._v("#")]),s._v(" "),t("em",[s._v("Tedis")])]),s._v(" "),t("ul",[t("li",[s._v("接口：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rename")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newKey"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Promise")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("any")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("ul",[t("li",[s._v("示例：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" Key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rename")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mykey"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myotherkey"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// "OK"')]),s._v("\n")])])]),t("h2",{attrs:{id:"renamenx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#renamenx"}},[s._v("#")]),s._v(" renamenx")]),s._v(" "),t("p",[s._v("当且仅当 newkey 不存在时，将 key 改名为 newkey 。当 key 不存在时，返回一个错误。")]),s._v(" "),t("h4",{attrs:{id:"redis-13"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-13"}},[s._v("#")]),s._v(" "),t("em",[s._v("Redis")]),s._v(" "),t("a",{attrs:{href:"http://www.redis.cn/commands/renamenx.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("+"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("可用版本："),t("code",[s._v(">= 1.0.0")])]),s._v(" "),t("li",[s._v("算法复杂度："),t("code",[s._v("O(1)")])]),s._v(" "),t("li",[s._v("返回值：修改成功时，返回 1 ，如果 newkey 已经存在，返回 0 。")]),s._v(" "),t("li",[s._v("指令案例：")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SET mykey "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OK"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SET myotherkey "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"World"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OK"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" RENAMENX mykey myotherkey\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" GET myotherkey\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"World"')]),s._v("\n")])])]),t("h4",{attrs:{id:"tedis-13"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tedis-13"}},[s._v("#")]),s._v(" "),t("em",[s._v("Tedis")])]),s._v(" "),t("ul",[t("li",[s._v("接口：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("renamenx")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" newKey"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Promise")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("ul",[t("li",[s._v("示例：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" Key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("renamenx")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mykey"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"myotherkey"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 0")]),s._v("\n")])])]),t("h2",{attrs:{id:"ttl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ttl"}},[s._v("#")]),s._v(" ttl")]),s._v(" "),t("p",[s._v("返回 key 剩余的过期时间。 这种反射能力允许 Redis 客户端检查指定 key 在数据集里面剩余的有效期。在 Redis 2.6 和之前版本，如果 key 不存在或者已过期时返回-1。从 Redis2.8 开始，错误返回值的结果有如下改变：")]),s._v(" "),t("ul",[t("li",[s._v("如果 key 不存在或者已过期，返回 -2")]),s._v(" "),t("li",[s._v("如果 key 存在并且没有设置过期时间（永久有效），返回 -1 。")])]),s._v(" "),t("h4",{attrs:{id:"redis-14"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-14"}},[s._v("#")]),s._v(" "),t("em",[s._v("Redis")]),s._v(" "),t("a",{attrs:{href:"http://www.redis.cn/commands/ttl.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("+"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("可用版本："),t("code",[s._v(">= 1.0.0")])]),s._v(" "),t("li",[s._v("算法复杂度："),t("code",[s._v("O(1)")])]),s._v(" "),t("li",[s._v("返回值： key 有效的秒数（TTL in seconds）,或者一个负值的错误 (参考上文)")]),s._v(" "),t("li",[s._v("指令案例：")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SET mykey "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OK"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" EXPIRE mykey "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" TTL mykey\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n")])])]),t("h4",{attrs:{id:"tedis-14"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tedis-14"}},[s._v("#")]),s._v(" "),t("em",[s._v("Tedis")])]),s._v(" "),t("ul",[t("li",[s._v("接口：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ttl")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Promise")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("ul",[t("li",[s._v("示例：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" Key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ttl")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mykey"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 10")]),s._v("\n")])])]),t("h2",{attrs:{id:"type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#type"}},[s._v("#")]),s._v(" type")]),s._v(" "),t("p",[s._v("返回 key 所存储的 value 的数据结构类型，它可以返回 string, list, set, zset 和 hash 等不同的类型。")]),s._v(" "),t("h4",{attrs:{id:"redis-15"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-15"}},[s._v("#")]),s._v(" "),t("em",[s._v("Redis")]),s._v(" "),t("a",{attrs:{href:"http://www.redis.cn/commands/type.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("+"),t("OutboundLink")],1)]),s._v(" "),t("ul",[t("li",[s._v("可用版本："),t("code",[s._v(">= 1.0.0")])]),s._v(" "),t("li",[s._v("算法复杂度："),t("code",[s._v("O(1)")])]),s._v(" "),t("li",[s._v("返回值：返回当前 key 的数据类型，如果 key 不存在时返回 none。")]),s._v(" "),t("li",[s._v("指令案例：")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("redis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SET key1 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"OK"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" LPUSH key2 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" SADD key3 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"value"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("integer"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" TYPE key1\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"string"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" TYPE key2\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"list"')]),s._v("\nredis"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" TYPE key3\n"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"set"')]),s._v("\n")])])]),t("h4",{attrs:{id:"tedis-15"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tedis-15"}},[s._v("#")]),s._v(" "),t("em",[s._v("Tedis")])]),s._v(" "),t("ul",[t("li",[s._v("接口：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Promise")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),t("ul",[t("li",[s._v("示例：")])]),s._v(" "),t("div",{staticClass:"language-ts extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" Key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"key1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// string")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" Key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"key2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// list")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" Key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"key3"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// set")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);