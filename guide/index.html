<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Guide | Tedis</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/images/favicon.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <meta name="description" content="tedis for nodejs">
    <meta name="keywords" content="tedis redis typescript async promise">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.9c80de7b.css" as="style"><link rel="preload" href="/assets/js/app.16e1a090.js" as="script"><link rel="preload" href="/assets/js/2.c2a5290c.js" as="script"><link rel="preload" href="/assets/js/1.bcf7a7a0.js" as="script"><link rel="preload" href="/assets/js/34.07921881.js" as="script"><link rel="prefetch" href="/assets/js/10.28bb3cec.js"><link rel="prefetch" href="/assets/js/11.1f244064.js"><link rel="prefetch" href="/assets/js/12.80ebd603.js"><link rel="prefetch" href="/assets/js/13.0b4fa241.js"><link rel="prefetch" href="/assets/js/14.4e248697.js"><link rel="prefetch" href="/assets/js/15.6c2990fe.js"><link rel="prefetch" href="/assets/js/16.09cf0dd7.js"><link rel="prefetch" href="/assets/js/17.4fc339fa.js"><link rel="prefetch" href="/assets/js/18.38200cd0.js"><link rel="prefetch" href="/assets/js/19.67f2a49a.js"><link rel="prefetch" href="/assets/js/20.d3f6c7fb.js"><link rel="prefetch" href="/assets/js/21.d64264ea.js"><link rel="prefetch" href="/assets/js/22.6877d8f0.js"><link rel="prefetch" href="/assets/js/23.27ffa9f4.js"><link rel="prefetch" href="/assets/js/24.292775b6.js"><link rel="prefetch" href="/assets/js/25.0a67d3da.js"><link rel="prefetch" href="/assets/js/26.0f0000f3.js"><link rel="prefetch" href="/assets/js/27.7fd81530.js"><link rel="prefetch" href="/assets/js/28.d42813cd.js"><link rel="prefetch" href="/assets/js/29.1d7a9b3c.js"><link rel="prefetch" href="/assets/js/3.c2fd3112.js"><link rel="prefetch" href="/assets/js/30.50955160.js"><link rel="prefetch" href="/assets/js/31.d28c53d2.js"><link rel="prefetch" href="/assets/js/32.cfa35c41.js"><link rel="prefetch" href="/assets/js/33.d42bf81f.js"><link rel="prefetch" href="/assets/js/35.062deb4e.js"><link rel="prefetch" href="/assets/js/36.fb5a67c6.js"><link rel="prefetch" href="/assets/js/37.f8e764f6.js"><link rel="prefetch" href="/assets/js/38.0014f88b.js"><link rel="prefetch" href="/assets/js/39.ba1c1f70.js"><link rel="prefetch" href="/assets/js/4.2dda509e.js"><link rel="prefetch" href="/assets/js/40.f8c940ea.js"><link rel="prefetch" href="/assets/js/41.6a80b03d.js"><link rel="prefetch" href="/assets/js/42.5bdc16c8.js"><link rel="prefetch" href="/assets/js/43.8b214183.js"><link rel="prefetch" href="/assets/js/44.92586fa0.js"><link rel="prefetch" href="/assets/js/45.d346ef8b.js"><link rel="prefetch" href="/assets/js/46.cdd3e5c2.js"><link rel="prefetch" href="/assets/js/5.6c4c7788.js"><link rel="prefetch" href="/assets/js/6.8a89b7a1.js"><link rel="prefetch" href="/assets/js/7.20a2e975.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.0b5706cb.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9c80de7b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Tedis</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/guide/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/api/" class="nav-link">
  API
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Translations</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Translations</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/silkjs/tedis" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/guide/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Guide
</a></div><div class="nav-item"><a href="/api/" class="nav-link">
  API
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Translations</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Translations</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/guide/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/guide/" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/silkjs/tedis" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="guide"><a href="#guide" class="header-anchor">#</a> Guide</h1> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>All the functions of Tedis are written and implemented by typescript. Finally, native javascript code is generated, supporting javascript (commonjs) and typescript calls. The project's adoption of typescript has many benefits, not only facilitating the development and maintenance of source code, but also providing type files, enabling users to have a more friendly development experience and higher development efficiency under editor prompts.</p> <h2 id="feature"><a href="#feature" class="header-anchor">#</a> feature</h2> <ul><li><em>types</em>: with typescript, providing both type checking and editor code hints.</li> <li><em>async</em>: Use promise, async to keep you out of the hell of pullbacks and make logical writing more intuitive.</li> <li><em>pool</em>: Reuse TCP connection to take advantage of redis performance and improve program robustness.</li></ul> <h2 id="what-is-tedis"><a href="#what-is-tedis" class="header-anchor">#</a> What is Tedis</h2> <p>Tedis is a redis client developed for nodejs platform. Its name was inspired by the Java platform jedis and the development language was typescript. Therefore, Tedis is named as Tedis.</p> <h2 id="why-not"><a href="#why-not" class="header-anchor">#</a> Why not</h2> <p><em>node_redis</em></p> <p><code>node_redis</code> started earlier, has withstood the test of time, functional coverage, all running stability. But much of the code is made up of older versions of javascript, and the process is preferred to be a callback function. Although can through <code>promise</code> and <code>bluebird</code> transformation to support asynchronous calls, but it would be relatively ugly API syntax. Because of its author, does not like typescript, also made it clear in the free program does not intend to support the typescript, community thus maintain a set of <code>@types/redis</code> type file, but the <code>node_redis</code> no native support for asynchronous calls, combined with its function implementation too geek, community edition of the type of the file is the original interface, combined with asynchronous code tips and altered type checking effect is not ideal.</p> <p><em>co-redis</em></p> <p><code>co-redis</code> in <code>node_redis</code> basis through <code>generators</code> features encapsulated redis client, is it in <code>node_redis</code> callback call process on the basis of more clear, but the project for a long time without maintenance, relative to the <code>async</code>, <code>await</code>, <code>generators</code> or less some, plus the lack of typescript support, code hinting aspects are not friendly.</p> <p><em>node-redlock</em></p> <p><code>node-redlock</code> new features support not in time, although there are unit tests, but not comprehensive, type files do not support.</p> <h2 id="getting-started"><a href="#getting-started" class="header-anchor">#</a> Getting Started</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> tedis
<span class="token comment"># OR npm install tedis --save</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// commonjs</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> Tedis<span class="token punctuation">,</span> TedisPool <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&quot;tedis&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// es</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Tedis<span class="token punctuation">,</span> TedisPool <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;tedis&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// TypeScript</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Tedis<span class="token punctuation">,</span> TedisPool <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;tedis&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p><em>Tedis</em></p> <table><thead><tr><th>param</th> <th>type</th> <th>default</th></tr></thead> <tbody><tr><td>host?</td> <td>string</td> <td>127.0.0.1</td></tr> <tr><td>port?</td> <td>number</td> <td>6379</td></tr> <tr><td>password?</td> <td>string</td> <td></td></tr> <tr><td>timeout?</td> <td>number</td> <td></td></tr></tbody></table> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> tedis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tedis</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  host<span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
  port<span class="token operator">:</span> <span class="token number">6379</span><span class="token punctuation">,</span>
  password<span class="token operator">:</span> <span class="token string">&quot;password&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><em>TedisPool</em></p> <table><thead><tr><th>param</th> <th>type</th> <th>default</th></tr></thead> <tbody><tr><td>host?</td> <td>string</td> <td>127.0.0.1</td></tr> <tr><td>port?</td> <td>number</td> <td>6379</td></tr> <tr><td>password?</td> <td>string</td> <td></td></tr> <tr><td>min_conn?</td> <td>number</td> <td>1</td></tr> <tr><td>max_conn?</td> <td>number</td> <td>10</td></tr> <tr><td>timeout?</td> <td>number</td> <td></td></tr></tbody></table> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> tedispool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TedisPool</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  host<span class="token operator">:</span> <span class="token string">&quot;127.0.0.1&quot;</span><span class="token punctuation">,</span>
  port<span class="token operator">:</span> <span class="token number">6379</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> tedis <span class="token operator">=</span> <span class="token keyword">await</span> tedispool<span class="token punctuation">.</span><span class="token function">getTedis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// do task ...</span>
tedispool<span class="token punctuation">.</span><span class="token function">putTedis</span><span class="token punctuation">(</span>tedis<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="example"><a href="#example" class="header-anchor">#</a> Example</h2> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// key</span>
<span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// string</span>
<span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;string1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;abcdefg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;string1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// hash</span>
<span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">hmset</span><span class="token punctuation">(</span><span class="token string">&quot;hash1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">23</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">hgetall</span><span class="token punctuation">(</span><span class="token string">&quot;hash1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// list</span>
<span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">lpush</span><span class="token punctuation">(</span><span class="token string">&quot;list1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">llen</span><span class="token punctuation">(</span><span class="token string">&quot;list1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// set</span>
<span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">sadd</span><span class="token punctuation">(</span><span class="token string">&quot;set1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">scard</span><span class="token punctuation">(</span><span class="token string">&quot;set1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// zset</span>
<span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">zadd</span><span class="token punctuation">(</span><span class="token string">&quot;zset1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;adg&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;aertet&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;afg&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">zcard</span><span class="token punctuation">(</span><span class="token string">&quot;zset1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// base</span>
client<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="connection-pooling"><a href="#connection-pooling" class="header-anchor">#</a> Connection pooling</h2> <p>Initializing a client with <code>Tedis</code> uses a single tcp connection, which is sufficient for a single instance when the service does not scale up in terms of concurrency. When the concurrency is large enough, a single instance of tcp connections doesn't give redis its true power, so you may need to use <code>TedisPool</code> to increase the service's power</p> <div class="custom-block danger"><p class="custom-block-title">warning</p> <p>When using <code>TedisPool</code>, remember to call <code>putTedis</code> to return the instance after it has been used to ensure that it is used properly next time.</p></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/silkjs/tedis/edit/master/doc/guide/README.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/4/2023, 6:14:10 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.16e1a090.js" defer></script><script src="/assets/js/2.c2a5290c.js" defer></script><script src="/assets/js/1.bcf7a7a0.js" defer></script><script src="/assets/js/34.07921881.js" defer></script>
  </body>
</html>
